{"version":3,"sources":["webpack:///./src/use/useFavorite.ts","webpack:///./src/views/Search.vue","webpack:///./src/use/useSearch.ts","webpack:///./src/views/Search.vue?19a8","webpack:///./src/views/Search.vue?9a3f","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./src/use/usePage.ts","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["useFavorite","store","handler","item","dispatch","onMounted","page","Error","class","error","loading","emptyLabel","data","pageData","favorites","favoriteHandler","type","show","paginationToShow","total","totalPages","currentPage","pageChangeHandler","pageChange","query","components","AppErrorBoundary","setup","pageProps","storeName","mountedHandler","queryChangeHandler","usePage","render","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","$","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","stat","sham","descriptor","O","f","result","index","undefined","props","router","route","searchParam","s","params","getters","value","pageCheck","newValue","e","param","fails","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","FORCED","forced","it"],"mappings":"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","file":"js/chunk-398388ba.7842fc69.js","sourcesContent":["import { ICharacter } from \"@/interfaces\";\r\nimport { useStore } from \"vuex\";\r\n\r\nconst useFavorite = () => {\r\n  const store = useStore();\r\n\r\n  const handler = async (item: ICharacter) => {\r\n    await store.dispatch(\"favorites/favoriteHandler\", item);\r\n  };\r\n\r\n  const onMounted = async (page: string) => {\r\n    try {\r\n      await store.dispatch(\"favorites/init\", page);\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    handler,\r\n    onMounted,\r\n  };\r\n};\r\n\r\nexport default useFavorite;\r\n","<template>\r\n  <app-error-boundary :error=\"error\">\r\n    <my-loader v-if=\"loading\"></my-loader>\r\n    <section v-else>\r\n      <h1 class=\"visually-hidden\">Search</h1>\r\n      <my-table\r\n        emptyLabel=\"no data satisfying your request\"\r\n        :data=\"pageData\"\r\n        :favorites=\"favorites\"\r\n        @addFavorite=\"favoriteHandler\"\r\n      ></my-table>\r\n      <my-pagination\r\n        type=\"programmatic\"\r\n        :show=\"paginationToShow\"\r\n        :total=\"totalPages\"\r\n        :currentPage=\"currentPage\"\r\n        :pageChangeHandler=\"pageChange\"\r\n      >\r\n      </my-pagination>\r\n    </section>\r\n  </app-error-boundary>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport useSearch from \"@/use/useSearch\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\nimport usePage from \"@/use/usePage\";\r\n\r\nexport default defineComponent({\r\n  components: { AppErrorBoundary },\r\n  setup() {\r\n    const { handler } = useSearch();\r\n    const pageProps = {\r\n      storeName: \"search\",\r\n      mountedHandler: handler,\r\n      queryChangeHandler: handler,\r\n    };\r\n\r\n    const page = usePage(pageProps);\r\n    const { handler: favoriteHandler } = useFavorite();\r\n\r\n    return { ...page, favoriteHandler };\r\n  },\r\n});\r\n</script>\r\n","import { useStore } from \"vuex\";\r\n\r\nconst useSearch = () => {\r\n  const store = useStore();\r\n\r\n  const handler = async (query: string) => {\r\n    if (!query) {\r\n      return;\r\n    }\r\n    try {\r\n      await store.dispatch(\"search/init\", query);\r\n    } catch (e) {\r\n      throw new Error(e);\r\n    }\r\n  };\r\n\r\n  return {\r\n    handler,\r\n  };\r\n};\r\n\r\nexport default useSearch;\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport useSearch from \"@/use/useSearch\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\nimport usePage from \"@/use/usePage\";\r\n\r\nexport default defineComponent({\r\n  components: { AppErrorBoundary },\r\n  setup() {\r\n    const { handler } = useSearch();\r\n    const pageProps = {\r\n      storeName: \"search\",\r\n      mountedHandler: handler,\r\n      queryChangeHandler: handler,\r\n    };\r\n\r\n    const page = usePage(pageProps);\r\n    const { handler: favoriteHandler } = useFavorite();\r\n\r\n    return { ...page, favoriteHandler };\r\n  },\r\n});\r\n","import { render } from \"./Search.vue?vue&type=template&id=b30a3d5a\"\nimport script from \"./Search.vue?vue&type=script&lang=ts\"\nexport * from \"./Search.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","import { computed, onMounted, ref, watch } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\n\r\ntype UsePageTypes = {\r\n  storeName: string;\r\n  queryChangeHandler?: (query: string) => void;\r\n  mountedHandler: (data: string) => Promise<any>;\r\n};\r\n\r\nconst usePage = (props: UsePageTypes) => {\r\n  const { storeName, queryChangeHandler, mountedHandler } = props;\r\n  const loading = ref(true);\r\n  const error = ref(false);\r\n  const store = useStore();\r\n  const router = useRouter();\r\n  const route = useRoute();\r\n\r\n  const searchParam = computed(() => route.query.s);\r\n\r\n  const page = computed(() => route.params.page);\r\n  const pageData = computed(() => store.getters[storeName + \"/pageData\"]);\r\n  const currentPage = computed(() => store.getters[storeName + \"/currentPage\"]);\r\n  const totalPages = computed(() => store.getters[storeName + \"/totalPages\"]);\r\n  const favorites = computed(() => store.getters[\"favorites/items\"]);\r\n  const paginationToShow = computed(\r\n    () => store.getters[\"app/paginationToShow\"]\r\n  );\r\n\r\n  const pageChange = async (page: number) => {\r\n    loading.value = true;\r\n    try {\r\n      await store.dispatch(storeName + \"/changePageHandler\", page);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  };\r\n\r\n  const pageCheck = () => {\r\n    const page = currentPage.value;\r\n    if (totalPages.value === 0) {\r\n      return true;\r\n    }\r\n    if (!page || page < 0 || page > totalPages.value) {\r\n      router.push(\"/404\");\r\n      loading.value = false;\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  watch(searchParam, (newValue) => {\r\n    loading.value = true;\r\n    try {\r\n      queryChangeHandler!(newValue as string);\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  });\r\n\r\n  onMounted(async () => {\r\n    try {\r\n      const param = storeName === \"search\" ? searchParam : page;\r\n      await mountedHandler(param.value as string);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n  });\r\n\r\n  watch(pageData, (newValue) => {\r\n    if (newValue) {\r\n      loading.value = false;\r\n    }\r\n  });\r\n  watch(currentPage, () => {\r\n    loading.value = true;\r\n  });\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    pageData,\r\n    currentPage,\r\n    totalPages,\r\n    favorites,\r\n    paginationToShow,\r\n    pageChange,\r\n  };\r\n};\r\n\r\nexport default usePage;\r\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}