{"version":3,"sources":["webpack:///./src/use/useFavorite.ts","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/Characters.vue","webpack:///./src/use/useCharacters.ts","webpack:///./src/views/Characters.vue?0954","webpack:///./src/views/Characters.vue?61f8","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./src/use/usePage.ts","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["useFavorite","store","handler","item","dispatch","onMounted","page","Error","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","class","error","loading","emptyLabel","data","pageData","favorites","favoriteHandler","show","paginationToShow","total","totalPages","linkPath","pageChangeHandler","pageChange","components","AppErrorBoundary","name","setup","pageProps","storeName","mountedHandler","usePage","render","$","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","stat","sham","descriptor","O","f","result","index","undefined","props","queryChangeHandler","router","route","searchParam","query","s","params","getters","currentPage","value","pageCheck","newValue","e","param","fails","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","FORCED","forced","it"],"mappings":"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","file":"js/chunk-6c4507c6.5cfd8299.js","sourcesContent":["import { ICharacter } from \"@/interfaces\";\r\nimport { useStore } from \"vuex\";\r\n\r\nconst useFavorite = () => {\r\n  const store = useStore();\r\n\r\n  const handler = async (item: ICharacter) => {\r\n    await store.dispatch(\"favorites/favoriteHandler\", item);\r\n  };\r\n\r\n  const onMounted = async (page: string) => {\r\n    try {\r\n      await store.dispatch(\"favorites/init\", page);\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    handler,\r\n    onMounted,\r\n  };\r\n};\r\n\r\nexport default useFavorite;\r\n","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","<template>\r\n  <app-error-boundary :error=\"error\">\r\n    <my-loader v-if=\"loading\"></my-loader>\r\n    <section v-else>\r\n      <h1 class=\"visually-hidden\">All Characters</h1>\r\n      <my-table\r\n        emptyLabel=\"The are no data to display\"\r\n        :data=\"pageData\"\r\n        :favorites=\"favorites\"\r\n        @addFavorite=\"favoriteHandler\"\r\n      ></my-table>\r\n      <my-pagination\r\n        v-if=\"pageData.length\"\r\n        :show=\"paginationToShow\"\r\n        :total=\"totalPages\"\r\n        linkPath=\"characters\"\r\n        :pageChangeHandler=\"pageChange\"\r\n      >\r\n      </my-pagination>\r\n    </section>\r\n  </app-error-boundary>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\nimport usePage from \"@/use/usePage\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport useCharacters from \"@/use/useCharacters\";\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\n\r\nexport default defineComponent({\r\n  components: { AppErrorBoundary },\r\n  name: \"Home\",\r\n  setup() {\r\n    const { onMounted } = useCharacters();\r\n\r\n    const pageProps = {\r\n      storeName: \"characters\",\r\n      mountedHandler: onMounted,\r\n    };\r\n    const page = usePage(pageProps);\r\n    const { handler: favoriteHandler } = useFavorite();\r\n\r\n    return { ...page, favoriteHandler };\r\n  },\r\n});\r\n</script>\r\n","import { useStore } from \"vuex\";\r\n\r\nconst useCharacters = () => {\r\n  const store = useStore();\r\n\r\n  const onMounted = async (page: string) => {\r\n    try {\r\n      return await store.dispatch(\"characters/init\", page);\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  };\r\n\r\n  return { onMounted };\r\n};\r\n\r\nexport default useCharacters;\r\n","\r\nimport { defineComponent } from \"vue\";\r\nimport usePage from \"@/use/usePage\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport useCharacters from \"@/use/useCharacters\";\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\n\r\nexport default defineComponent({\r\n  components: { AppErrorBoundary },\r\n  name: \"Home\",\r\n  setup() {\r\n    const { onMounted } = useCharacters();\r\n\r\n    const pageProps = {\r\n      storeName: \"characters\",\r\n      mountedHandler: onMounted,\r\n    };\r\n    const page = usePage(pageProps);\r\n    const { handler: favoriteHandler } = useFavorite();\r\n\r\n    return { ...page, favoriteHandler };\r\n  },\r\n});\r\n","import { render } from \"./Characters.vue?vue&type=template&id=72508195\"\nimport script from \"./Characters.vue?vue&type=script&lang=ts\"\nexport * from \"./Characters.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","import { computed, onMounted, ref, watch } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\n\r\ntype UsePageTypes = {\r\n  storeName: string;\r\n  queryChangeHandler?: (query: string) => void;\r\n  mountedHandler: (data: string) => Promise<any>;\r\n};\r\n\r\nconst usePage = (props: UsePageTypes) => {\r\n  const { storeName, queryChangeHandler, mountedHandler } = props;\r\n  const loading = ref(true);\r\n  const error = ref(false);\r\n  const store = useStore();\r\n  const router = useRouter();\r\n  const route = useRoute();\r\n\r\n  const searchParam = computed(() => route.query.s);\r\n\r\n  const page = computed(() => route.params.page);\r\n  const pageData = computed(() => store.getters[storeName + \"/pageData\"]);\r\n  const currentPage = computed(() => store.getters[storeName + \"/currentPage\"]);\r\n  const totalPages = computed(() => store.getters[storeName + \"/totalPages\"]);\r\n  const favorites = computed(() => store.getters[\"favorites/items\"]);\r\n  const paginationToShow = computed(\r\n    () => store.getters[\"app/paginationToShow\"]\r\n  );\r\n\r\n  const pageChange = async (page: number) => {\r\n    loading.value = true;\r\n    try {\r\n      await store.dispatch(storeName + \"/changePageHandler\", page);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  };\r\n\r\n  const pageCheck = () => {\r\n    const page = currentPage.value;\r\n    if (totalPages.value === 0) {\r\n      return true;\r\n    }\r\n    if (!page || page < 0 || page > totalPages.value) {\r\n      router.push(\"/404\");\r\n      loading.value = false;\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  watch(searchParam, (newValue) => {\r\n    loading.value = true;\r\n    try {\r\n      queryChangeHandler!(newValue as string);\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  });\r\n\r\n  onMounted(async () => {\r\n    try {\r\n      const param = storeName === \"search\" ? searchParam : page;\r\n      await mountedHandler(param.value as string);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n  });\r\n\r\n  watch(pageData, (newValue) => {\r\n    if (newValue) {\r\n      loading.value = false;\r\n    }\r\n  });\r\n  watch(currentPage, () => {\r\n    loading.value = true;\r\n  });\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    pageData,\r\n    currentPage,\r\n    totalPages,\r\n    favorites,\r\n    paginationToShow,\r\n    pageChange,\r\n  };\r\n};\r\n\r\nexport default usePage;\r\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}