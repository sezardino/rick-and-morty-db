{"version":3,"sources":["webpack:///./src/use/useFavorite.ts","webpack:///./src/views/Favorites.vue","webpack:///./src/views/Favorites.vue?c82e","webpack:///./src/views/Favorites.vue?bfae","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./src/use/usePage.ts","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"],"names":["useFavorite","store","handler","item","dispatch","onMounted","page","Error","class","error","loading","emptyLabel","data","pageData","favorites","favoriteHandler","length","show","paginationToShow","total","totalPages","linkPath","current","currentPage","pageChangeHandler","pageChange","name","components","AppErrorBoundary","setup","pageProps","storeName","mountedHandler","usePage","render","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","source","forEach","key","defineProperty","getOwnPropertyDescriptors","defineProperties","$","DESCRIPTORS","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","stat","sham","descriptor","O","f","result","index","undefined","props","queryChangeHandler","router","route","searchParam","query","s","params","getters","value","pageCheck","newValue","e","param","fails","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","FORCED","forced","it"],"mappings":"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","file":"js/chunk-774158cf.8a55508e.js","sourcesContent":["import { ICharacter } from \"@/interfaces\";\r\nimport { useStore } from \"vuex\";\r\n\r\nconst useFavorite = () => {\r\n  const store = useStore();\r\n\r\n  const handler = async (item: ICharacter) => {\r\n    await store.dispatch(\"favorites/favoriteHandler\", item);\r\n  };\r\n\r\n  const onMounted = async (page: string) => {\r\n    try {\r\n      await store.dispatch(\"favorites/init\", page);\r\n    } catch (error) {\r\n      throw new Error(error);\r\n    }\r\n  };\r\n\r\n  return {\r\n    handler,\r\n    onMounted,\r\n  };\r\n};\r\n\r\nexport default useFavorite;\r\n","<template>\r\n  <app-error-boundary :error=\"error\">\r\n    <my-loader v-if=\"loading\"></my-loader>\r\n    <section v-else>\r\n      <h1 class=\"visually-hidden\">Favorite characters</h1>\r\n      <my-table\r\n        emptyLabel=\"The are no favorite characters, add some on all characters page\"\r\n        :data=\"pageData\"\r\n        :favorites=\"favorites\"\r\n        @addFavorite=\"favoriteHandler\"\r\n      ></my-table>\r\n      <my-pagination\r\n        v-if=\"pageData.length\"\r\n        :show=\"paginationToShow\"\r\n        :total=\"totalPages\"\r\n        linkPath=\"favorites\"\r\n        :current=\"currentPage\"\r\n        :pageChangeHandler=\"pageChange\"\r\n      >\r\n      </my-pagination>\r\n    </section>\r\n  </app-error-boundary>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport usePage from \"@/use/usePage\";\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"Favorites\",\r\n  components: { AppErrorBoundary },\r\n  setup() {\r\n    const { handler: favoriteHandler, onMounted } = useFavorite();\r\n\r\n    const pageProps = {\r\n      storeName: \"favorites\",\r\n      mountedHandler: onMounted,\r\n    };\r\n\r\n    const page = usePage(pageProps);\r\n\r\n    return { favoriteHandler, ...page };\r\n  },\r\n});\r\n</script>\r\n","\r\nimport AppErrorBoundary from \"@/components/AppErrorBoundary.vue\";\r\nimport useFavorite from \"@/use/useFavorite\";\r\nimport usePage from \"@/use/usePage\";\r\nimport { defineComponent } from \"vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"Favorites\",\r\n  components: { AppErrorBoundary },\r\n  setup() {\r\n    const { handler: favoriteHandler, onMounted } = useFavorite();\r\n\r\n    const pageProps = {\r\n      storeName: \"favorites\",\r\n      mountedHandler: onMounted,\r\n    };\r\n\r\n    const page = usePage(pageProps);\r\n\r\n    return { favoriteHandler, ...page };\r\n  },\r\n});\r\n","import { render } from \"./Favorites.vue?vue&type=template&id=09bdf356\"\nimport script from \"./Favorites.vue?vue&type=script&lang=ts\"\nexport * from \"./Favorites.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","import { computed, onMounted, ref, watch } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\n\r\ntype UsePageTypes = {\r\n  storeName: string;\r\n  queryChangeHandler?: (query: string) => void;\r\n  mountedHandler: (data: string) => Promise<any>;\r\n};\r\n\r\nconst usePage = (props: UsePageTypes) => {\r\n  const { storeName, queryChangeHandler, mountedHandler } = props;\r\n  const loading = ref(true);\r\n  const error = ref(false);\r\n  const store = useStore();\r\n  const router = useRouter();\r\n  const route = useRoute();\r\n\r\n  const searchParam = computed(() => route.query.s);\r\n\r\n  const page = computed(() => route.params.page);\r\n  const pageData = computed(() => store.getters[storeName + \"/pageData\"]);\r\n  const currentPage = computed(() => store.getters[storeName + \"/currentPage\"]);\r\n  const totalPages = computed(() => store.getters[storeName + \"/totalPages\"]);\r\n  const favorites = computed(() => store.getters[\"favorites/items\"]);\r\n  const paginationToShow = computed(\r\n    () => store.getters[\"app/paginationToShow\"]\r\n  );\r\n\r\n  const pageChange = async (page: number) => {\r\n    loading.value = true;\r\n    try {\r\n      await store.dispatch(storeName + \"/changePageHandler\", page);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  };\r\n\r\n  const pageCheck = () => {\r\n    const page = currentPage.value;\r\n    if (totalPages.value === 0) {\r\n      return true;\r\n    }\r\n    if (!page || page < 0 || page > totalPages.value) {\r\n      router.push(\"/404\");\r\n      loading.value = false;\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n\r\n  watch(searchParam, (newValue) => {\r\n    loading.value = true;\r\n    try {\r\n      queryChangeHandler!(newValue as string);\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n    loading.value = false;\r\n  });\r\n\r\n  onMounted(async () => {\r\n    try {\r\n      const param = storeName === \"search\" ? searchParam : page;\r\n      await mountedHandler(param.value as string);\r\n      pageCheck();\r\n    } catch (e) {\r\n      error.value = true;\r\n    }\r\n  });\r\n\r\n  watch(pageData, (newValue) => {\r\n    if (newValue) {\r\n      loading.value = false;\r\n    }\r\n  });\r\n  watch(currentPage, () => {\r\n    loading.value = true;\r\n  });\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    pageData,\r\n    currentPage,\r\n    totalPages,\r\n    favorites,\r\n    paginationToShow,\r\n    pageChange,\r\n  };\r\n};\r\n\r\nexport default usePage;\r\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n"],"sourceRoot":""}